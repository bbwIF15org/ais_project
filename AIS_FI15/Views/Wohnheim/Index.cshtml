
@{
    //ViewBag.Title = "Index";
    ViewBag.Title = "Wohnheim";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@using WebMatrix.Data;

<h2>Wohnheim</h2>
<div class="panel panel-default">
    @{
        //ToDo fehler abfangen wenn db-verbindung fehlschlägt (try catch?)
        var db = Database.Open("SQLServerConnectionString");

        //ToDo prüfen ob ViewBag.Title NULL
        var selectQueryString = "SELECT * FROM Zeiten";

        IEnumerable<dynamic> dbItems = db.Query(selectQueryString);
    }
    @if (dbItems.Count() != 0)
    {
        <h3>Öffnungszeiten</h3>
        foreach (var item in dbItems)
        {
            <table>
                <thead>
                    <tr>
                        <td colspan="3">
                            @item.Name
                        </td>
                    </tr>
                </thead>
                <tr>
                    <th>Montag</th>
                    <td>@item.MontagFr</td>
                    <td> - </td>
                    <td>@item.MontagSp</td>
                </tr>
                <tr>
                    <th>Dienstag</th>
                    <td>@item.DienstagFr</td>
                    <td> - </td>
                    <td>@item.DienstagSp</td>
                </tr>
                <tr>
                    <th>Mittwoch</th>
                    <td>@item.MittwochFr</td>
                    <td> - </td>
                    <td>@item.MittwochSp</td>
                </tr>
                <tr>
                    <th>Donnerstag</th>
                    <td>@item.DonnerstagFr</td>
                    <td> - </td>
                    <td>@item.DonnerstagSp</td>
                </tr>
                <tr>
                    <th>Freitag</th>
                    <td>@item.FreitagFr</td>
                    <td> - </td>
                    <td>@item.FreitagSp</td>
                </tr>
                <tr>
                    <th>Samstag</th>
                    <td>@item.SamstagFr</td>
                    <td> - </td>
                    <td>@item.SamstagSp</td>
                </tr>
                <tr>
                    <th>Sonntag</th>
                    <td>@item.SonntagFr</td>
                    <td> - </td>
                    <td>@item.SonntagSp</td>
                </tr>
            </table>
            if (Request.IsAuthenticated)
            {
                using (@Html.BeginForm(null, "Wohnheim/Delete"))
                {
                    @Html.TextBox("sId", null, new { Value = item.Id, Class = "hidden" })
                    @*Titel des aufrufenden Views(z.B. Wohnheim/Index.cshtml) an den Controller(SharedAnzeigenController) weitergeben:*@
                    @Html.TextBox("callingView", null, new { Value = "Zeiten", Class = "hidden" })
                    <input type="submit" value="Löschen" class="btn btn-danger" />
                }
            }
        }
    }
    @if (Request.IsAuthenticated)
    {
        using (Html.BeginForm(null, "Wohnheim/Index", FormMethod.Post, new { enctype = "multipart/form-data" }))
        {
            <fieldset>
                <legend>Neue Öffnungszeit</legend>
                <div class="row">
                    <div class="col-sm-4">
                        <label for="name">Name</label>
                        @Html.TextBox("Name", null, new { @id = "name", @class = "input required", @required = "required" })

                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-2">
                        <label for="u1">Montag Vormittag</label>
                        @Html.TextBox("U1", null, new { @id = "u1", @class = "input" })
                    </div>
                    <div class="col-sm-2">
                        <label for="u2">Montag Nachmittag</label>
                        @Html.TextBox("U2", null, new { @id = "u2", @class = "input" })
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-2">
                        <label for="u1">Dienstag Vormittag</label>
                        @Html.TextBox("U3", null, new { @id = "u3", @class = "input" })
                    </div>
                    <div class="col-sm-2">
                        <label for="u2">Dienstag Nachmittag</label>
                        @Html.TextBox("U4", null, new { @id = "u4", @class = "input" })
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-2">
                        <label for="u1">Mittwoch Vormittag</label>
                        @Html.TextBox("U5", null, new { @id = "u5", @class = "input" })
                    </div>
                    <div class="col-sm-2">
                        <label for="u2">Mittwoch Nachmittag</label>
                        @Html.TextBox("U6", null, new { @id = "u6", @class = "input" })
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-2">
                        <label for="u1">Donnerstag Vormittag</label>
                        @Html.TextBox("U7", null, new { @id = "u7", @class = "input" })
                    </div>
                    <div class="col-sm-2">
                        <label for="u2">Donnerstag Nachmittag</label>
                        @Html.TextBox("U8", null, new { @id = "u8", @class = "input" })
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-2">
                        <label for="u1">Freitag Vormittag</label>
                        @Html.TextBox("U9", null, new { @id = "u9", @class = "input" })
                    </div>
                    <div class="col-sm-2">
                        <label for="u2">Freitag Nachmittag</label>
                        @Html.TextBox("U10", null, new { @id = "u10", @class = "input" })
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-2">
                        <label for="u1">Samstag Vormittag</label>
                        @Html.TextBox("U11", null, new { @id = "u11", @class = "input" })
                    </div>
                    <div class="col-sm-2">
                        <label for="u2">Samstag Nachmittag</label>
                        @Html.TextBox("U12", null, new { @id = "u12", @class = "input" })
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-2">
                        <label for="u1">Sonntag Vormittag</label>
                        @Html.TextBox("U13", null, new { @id = "u13", @class = "input" })
                    </div>
                    <div class="col-sm-2">
                        <label for="u2">Sonntag Nachmittag</label>
                        @Html.TextBox("U14", null, new { @id = "u14", @class = "input" })
                    </div>
                </div>
                @*Titel des aufrufenden Views(z.B. Wohnheim/Index.cshtml) an den Controller(SharedAnzeigenController) weitergeben:*@
                @Html.TextBox("callingView", null, new { Value = "Zeiten", Class = "hidden" })
                <input type="submit" value="Hinzufügen" class="btn btn-default" />
            </fieldset>

        }
    }
</div>

    @Html.Partial("~/Views/SharedAnzeigen/Index.cshtml")

    @if (Request.IsAuthenticated)
    {
        <div class="panel panel-default">
            <div class="panel-body" id="InhaltBearbeiten">
                @Html.Partial("~/Views/SharedBearbeiten/Index.cshtml")
            </div>
        </div>
    }



